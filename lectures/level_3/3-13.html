<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- jQuery -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      ;
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <link rel="stylesheet" href="./3-13.css" />

    <title>마우스 이벤또</title>
  </head>
  <body>
    <div style="overflow: hidden">
      <div class="slide-container">
        <div class="slide-box">
          <img src="../../assets/car1.png" draggable="false" />
        </div>
        <div class="slide-box">
          <img src="../../assets/car2.png" draggable="false" />
        </div>
        <div class="slide-box">
          <img src="../../assets/car3.png" draggable="false" />
        </div>
      </div>
    </div>

    <script>
      var startX;
      var pressed = false;
      // var currentIdx = 0;

      // 스무스하게 넘겨갈떄, 아래 코드 작성하면 됨.
      $('img')
        .eq(0)
        .on('mousedown', function (e) {
          // console.log(`mousedownX :  ${e.clientX} Y :${e.clientY}`);
          startX = e.clientX;
          pressed = true;
        });

      $('img')
        .eq(0)
        .on('mousemove', function (e) {
          console.log(`mousemove X :  ${startX - e.clientX}`);
          if (pressed) {
            $('.slide-container').css(
              'transform',
              `translateX(-${startX - e.clientX}px)`,
            );
          }
        });

      $('img')
        .eq(0)
        .on('mouseup', function (e) {
          // console.log(`mouseup X :  ${e.clientX} Y :${e.clientY}`);
          pressed = false;
          $('.slide-container').css('transition', 'all 1s');
          setTimeout(() => {
            $('.slide-container').css('transition', 'all 0s');
          }, 1000);

          // 거리가 100보다 클때.
          if (startX - e.clientX >= 100) {
            $('.slide-container').css('transform', `translateX(-100vw)`);
          } else {
            $('.slide-container').css('transform', `translateX(0vw)`);
          }
        });

      // 누르고 100px 하고 때면 다른 이미지로 넘어가게 할 거임
      // mouseup일때가 더 크면 넘어감
    </script>
  </body>
</html>
