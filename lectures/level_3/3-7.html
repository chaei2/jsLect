<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQuery -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      ;
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <title>Ajax</title>
  </head>
  <body>
    <!--링크들 "https://jaehun-kang.github.io/MRS_JS_Lecture/lectures.json"
"https://jaehun-kang.github.io/MRS_JS_Lecture/more1.json"
"https://jaehun-kang.github.io/MRS_JS_Lecture/more2.json" -->

    <div class="container">
      <div class="row">
        <div class="card m-2 pt-2">
          <h5>대상학년 강의명</h5>
          <p>교수명 : ○○○</p>
        </div>
      </div>
      <button class="btn btn-danger" id="more">더보기</button>
    </div>

    <script>
      // var card = `<div class="card m-2 pt-2">
      //                 <h5>대상학년 강의명</h5>
      //                 <p>교수명 : ○○○</p>
      //               </div>`;

      function makeCards(obj) {
        obj.forEach(function (a, i) {
          var card = `<div class="card m-2 pt-2">
                            <h5>${a.grade} ${a.title}</h5>
                            <p>교수명 :${a.professor}</p>
                          </div>`;
          // i = index임
          $('.row').append(card);
        });
      }

      // function moreCards(obj) {
      //   obj.forEach(function (a, i) {
      //     $('.btn btn-danger').append(more);
      //     // $('button').eq(i).html();
      //   });
      // }
      // 이게 한 세트임

      // 서버로부터 데이터를 불러오는거임
      // forEach에 a는 배열이 0, 1, 2, 3이 있지만 각각의
      $.get('https://jaehun-kang.github.io/MRS_JS_Lecture/lectures.json')
        .done((data) => {
          console.log(data);
          makeCards(data);
        })
        .fail((data) => {
          console.log(data);
        });
      //

      // 버튼 누를떄마다 count++이 되게 하고, 버튼을 누르면 count가 올라가는걸 만들고, if문 만들어서, get해서 more1, more2번 하면되고, display hidden으로 하던가 하면됨.

      // 정답임
      var count = 0;

      // $('#more').on('click', function () {
      //   count++;

      //   if (count == 1) {
      //     $.get('https://jaehun-kang.github.io/MRS_JS_Lecture/more1.json')
      //       .done((data) => {
      //         makeCards(data);
      //       })
      //       .fail((data) => {});
      //   } else if (count == 2) {
      //     $.get('https://jaehun-kang.github.io/MRS_JS_Lecture/more2.json')
      //       .done((data) => {
      //         makeCards(data);
      //       })
      //       .fail((data) => {});
      //     $(this).prop('hidden', true);
      //   }
      // });

      $('#more').on('click', function (e) {
        count++;

        $.get(`https://jaehun-kang.github.io/MRS_JS_Lecture/more${count}.json`)
          .done((data) => {
            makeCards(data);
          })
          .fail((data) => {});

        if (count == 2) {
          $(this).prop('hidden', true);
        }
      });

      // var count = 0;

      // $('button').on('click', function (e) {
      //   count++;

      //   if (count === 1) {
      //     $.get('https://jaehun-kang.github.io/MRS_JS_Lecture/more1.json').done(
      //       (data) => {
      //         console.log(data);
      //         makeCards(data);
      //       }
      //     );
      //   } else if (count === 2) {
      //     $.get('https://jaehun-kang.github.io/MRS_JS_Lecture/more2.json').done(
      //       (data) => {
      //         makeCards(data);
      //         console.log(data);
      //       }
      //     );
      //   } else {
      //     // 이게 왜 안됨;
      //     // $('.btn btn-danger').css('display', 'hidden');
      //     $('button').removeClass('.btn btn-danger');
      //   }
      // });

      // $('button').on('click', function (e) {
      //   if ($(e.target).is(this)) {
      //     $('button').removeClass('.btn btn-danger');
      //   } else {
      //     e.preventDefault();
      //   }
      // });
    </script>
  </body>
</html>
